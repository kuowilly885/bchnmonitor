(function(t){function e(e){for(var s,c,o=e[0],r=e[1],l=e[2],b=0,u=[];b<o.length;b++)c=o[b],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&u.push(n[c][0]),n[c]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);h&&h(e);while(u.length)u.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var r=a[o];0!==n[r]&&(s=!1)}s&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},n={app:0},i=[];function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var h=r;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0b39":function(t,e,a){"use strict";var s=a("60e9"),n=a.n(s);n.a},3760:function(t,e,a){},5485:function(t,e,a){"use strict";var s=a("d17b"),n=a.n(s);n.a},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"EventBus",(function(){return R}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"master"},[a("loadingComponent",{attrs:{active:t.isBlocksDataLoading,"can-cancel":!1,"lock-scroll":!0,"is-full-page":!0},on:{"update:active":function(e){t.isBlocksDataLoading=e}}}),a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v(" BCH HF Monitor")]),a("div",{staticClass:"menu"},[a("div",[a("a",{class:{selected:"mix"==t.tab,normal:"mix"!=t.tab},attrs:{tab:"mix"},on:{click:t.changeTab}},[t._v("MIX")])]),a("div",[a("a",{class:{selected:"bch"==t.tab,normal:"bch"!=t.tab},attrs:{tab:"bch"},on:{click:t.changeTab}},[t._v("ABC")])]),a("div",[a("a",{class:{selected:"bchn"==t.tab,normal:"bchn"!=t.tab},attrs:{tab:"bchn"},on:{click:t.changeTab}},[t._v("NODE")])]),a("div",[a("a",{class:{selected:"bchbchn"==t.tab,normal:"bchbchn"!=t.tab},attrs:{tab:"bchbchn"},on:{click:t.changeTab}},[t._v("ABC NODE")])])])]),a("div",{staticClass:"page_container"},[a("div",{staticClass:"blockdata_container"},[a("div",{staticClass:"blocksection"},t._l(t.bdatas,(function(t){return a("blockDataComponent",{key:t.tag,attrs:{bdata:t}})})),1)]),a("div",{staticClass:"chain_container"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.gotoHeight,expression:"gotoHeight"}],staticClass:"searchbar",attrs:{placeholder:"height"},domProps:{value:t.gotoHeight},on:{input:function(e){e.target.composing||(t.gotoHeight=e.target.value)}}}),a("img",{staticClass:"searchicon",attrs:{src:"/image/search.png"},on:{click:t.handleGotoHeight}})]),a("div",{staticClass:"chain"},[t.blocks.length&&t.blocks[0].height!=t.topHeight?a("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.handleScrolledToTop,expression:"handleScrolledToTop"}]}):t._e(),t._l(t.blocks,(function(e){return a("blockComponent",{key:e.height,ref:"block-"+e.height,refInFor:!0,attrs:{block:e,tag:t.tab,id:"block-"+e.height}})})),t.blocks.length?a("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.handleScrolledToBottom,expression:"handleScrolledToBottom"}]}):t._e()],2)])])],1)},i=[],c=(a("a4d3"),a("e01a"),a("d28b"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("96cf"),a("1da1")),o=a("bc3a"),r=a.n(o),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block-container"},[a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.tip,expression:"tip",modifiers:{left:!0}}],staticClass:"block-content-container",on:{click:t.showBlock}},[a("img",{staticClass:"block",attrs:{src:t.imgSrcPath}}),t.selected?a("img",{staticClass:"checked",attrs:{src:"/image/checked.png"}}):t._e(),a("div",{staticClass:"height-container"},[a("div",{staticClass:"height",class:{height_black:t.isSame,height_red:!t.isSame}},[t._v(t._s(t.block.height))])])]),a("div",{staticClass:"vl",class:{vl_black:t.isSame,vl_red:!t.isSame}})])},h=[],b={name:"Block",data:function(){return{imgSrcPath:"/image/cube-same.png",isSame:!1,tip:"",selected:!1}},props:{block:Object,tag:String},methods:{getLastHash:function(t){return t?"..."+t.substring(t.length-10,t.length):"none"},showBlock:function(){if("mix"==this.tag)R.$emit("showBlock",this.block);else{var t={height:this.block.height,bch:{isEmpty:!0},bchn:{isEmpty:!0},bchbchn:{isEmpty:!0}};t[this.tag]=this.block,R.$emit("showBlock",t)}}},mounted:function(){if("mix"==this.tag){var t=this.block.bch.hash,e=this.block.bchn.hash,a=this.block.bchbchn.hash;this.isSame=t==e&&e==a,this.imgSrcPath=this.isSame?"/image/cube-same.png":"/image/cube-diff.png",this.tip="bchabc: "+this.getLastHash(t)+"\nbchnode: "+this.getLastHash(e)+"\nbchbchn: "+this.getLastHash(a)}else this.isSame=!0,this.imgSrcPath="/image/cube-same.png",this.tip=this.getLastHash(this.block.hash)}},u=b,d=(a("f94f"),a("2877")),g=Object(d["a"])(u,l,h,!1,null,"ddc88742",null),p=g.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(t._s(t.bdata.tag))]),a("div",{staticClass:"item"},[a("span",[t._v("Height:")]),a("span",[t._v(t._s(t.bdata.height))])]),a("div",{staticClass:"item"},[a("span",[t._v("Size:")]),a("span",[t._v(t._s(t.bdata.size))])]),a("div",{staticClass:"item"},[a("span",[t._v("Version:")]),a("span",[t._v(t._s(t.bdata.version))])]),a("div",{staticClass:"item"},[a("span",[t._v("Version Hex:")]),a("span",[t._v(t._s(t.bdata.versionHex?t.bdata.versionHex:"null"))])]),a("div",{staticClass:"item"},[a("span",[t._v("Time:")]),a("span",[t._v(t._s(""+t.bdata.time))])]),a("div",{staticClass:"item"},[a("span",[t._v("Median Time:")]),a("span",[t._v(t._s(""+t.bdata.mediantime))])]),a("div",{staticClass:"item"},[a("span",[t._v("Nonce:")]),a("span",[t._v(t._s(t.bdata.nonce))])]),a("div",{staticClass:"item"},[a("span",[t._v("Bits:")]),a("span",[t._v(t._s(t.bdata.bits))])]),a("div",{staticClass:"item"},[a("span",[t._v("Nunber of Txs:")]),a("span",[t._v(t._s(t.bdata.nTx))])]),a("div",{staticClass:"item"},[a("span",[t._v("Chainwork:")]),a("copyTextComponent",{attrs:{showingText:t.getLastHash(t.bdata.chainwork),text:t.bdata.chainwork}})],1),a("div",{staticClass:"item"},[a("span",[t._v("Prev Hash:")]),a("copyTextComponent",{attrs:{showingText:t.getLastHash(t.bdata.previousblockhash),text:t.bdata.previousblockhash}})],1),a("div",{staticClass:"item"},[a("span",[t._v("Merkle Root:")]),a("copyTextComponent",{attrs:{showingText:t.getLastHash(t.bdata.merkleroot),text:t.bdata.merkleroot}})],1),a("div",{staticClass:"item"},[a("span",[t._v("Hash:")]),a("copyTextComponent",{attrs:{showingText:t.getLastHash(t.bdata.hash),text:t.bdata.hash}})],1)])},v=[],f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.text,expression:"text"},{name:"clipboard",rawName:"v-clipboard:success",value:t.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"tooltip",rawName:"v-tooltip.bottom",value:{content:"copied",trigger:"manual",show:t.isOpen},expression:"{ content: 'copied', trigger: 'manual', show: isOpen }",modifiers:{bottom:!0}}],staticClass:"copy",attrs:{title:"yo"}},[t._v(" "+t._s(t.showingText)+" ")])},k=[],x={name:"CopyText",data:function(){return{isOpen:!1}},props:{showingText:String,text:String},methods:{clipboardSuccessHandler:function(){var t=this;t.isOpen||(t.isOpen=!0,setTimeout((function(){t.isOpen=!1}),500))}}},_=x,y=(a("c254"),Object(d["a"])(_,f,k,!1,null,"503e4c5e",null)),H=y.exports,w={name:"BlockData",components:{copyTextComponent:H},data:function(){return{}},props:{bdata:Object},methods:{getTime:function(t){var e=Math.round((new Date).getTime()/1e3)-t;return e<60?e+" secs":e<3600?Math.round(e/60)+" mins":e<86400?Math.round(e/3600)+" hrs":Math.round(e/86400)+" days"},getLastHash:function(t){return"... "+t.substring(t.length-10,t.length)}}},B=w,C=(a("0b39"),Object(d["a"])(B,m,v,!1,null,"4a56fdb4",null)),T=C.exports,O=a("9062"),S=a.n(O),E=(a("e40d"),{name:"App",components:{blockComponent:p,blockDataComponent:T,loadingComponent:S.a},data:function(){return{blocks:[],afterHeight:0,tab:"mix",bdatas:[],isBlocksDataLoading:!0,topHeight:0,gotoHeight:null,selectedHeight:-1}},methods:{showBlockBroadcast:function(t){if("mix"==this.tab)R.$emit("showBlock",t);else{var e={height:t.height,bch:{isEmpty:!0},bchn:{isEmpty:!0},bchbchn:{isEmpty:!0}};e[this.tab]=t,R.$emit("showBlock",e)}},getTopBlocks:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,s,n,i,c,o,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=-1,"mix"!=t.tab){e.next=11;break}return e.next=4,r.a.get("/api/mix/blocks");case 4:s=e.sent,n=0==s.data.bch.blocks.length?-1:s.data.bch.blocks[0].height,i=0==s.data.bchn.blocks.length?-1:s.data.bchn.blocks[0].height,c=0==s.data.bchbchn.blocks.length?-1:s.data.bchbchn.blocks[0].height,a=Math.max(n,i,c)+1,e.next=16;break;case 11:return e.next=13,r.a.get("/api/"+t.tab+"/blocks");case 13:o=e.sent,l=0==o.data.blocks.length?-1:o.data.blocks[0].height,a=l+1;case 16:return e.next=18,t.getBlocksByHeight(a);case 18:h=e.sent,t.afterHeight=h.afterHeight,t.blocks=h.blocks,t.$nextTick((function(){document.getElementById("block-"+(a-1)).scrollIntoView(!0),h.blocks.length>0&&(t.topHeight=h.blocks[0].height,t.showBlockBroadcast(h.blocks[0])),t.isBlocksDataLoading=!1}));case 22:case"end":return e.stop()}}),e)})))()},getBlocksByHeight:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,n,i,c,o,l,h,b,u,d,g,p,m,v,f,k,x;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=[],n=!1,i=-1,"mix"!=e.tab){a.next=30;break}return a.next=6,r.a.get("/api/mix/blocks?afterHeight="+t);case 6:c=a.sent,console.log("afterHeight: "+t),console.log(c.data),o=e.getMap(c.data.bch),l=e.getMap(c.data.bchn),h=e.getMap(c.data.bchbchn),i=t-1,b=0;case 14:if(!(b<10)){a.next=28;break}if(u=o[i],d=l[i],g=h[i],p={height:i,bch:u||{isEmpty:!0},bchn:d||{isEmpty:!0},bchbchn:g||{isEmpty:!0}},p.bch.isEmpty&&p.bchn.isEmpty&&p.bchbchn.isEmpty){a.next=23;break}s.push(p),a.next=25;break;case 23:return n=!0,a.abrupt("break",28);case 25:b++,i--,a.next=14;break;case 28:a.next=48;break;case 30:return a.next=32,r.a.get("/api/"+e.tab+"/blocks?afterHeight="+t);case 32:m=a.sent,v=e.getMap(m.data),i=t-1,f=0;case 36:if(!(f<10)){a.next=48;break}if(k=v[i],x=k||{isEmpty:!0},x.isEmpty){a.next=43;break}s.push(x),a.next=45;break;case 43:return n=!0,a.abrupt("break",48);case 45:f++,i--,a.next=36;break;case 48:return t=n?-1:i+1,a.abrupt("return",{blocks:s,afterHeight:t});case 50:case"end":return a.stop()}}),a)})))()},handleScrolledToBottom:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=4;break}return a.abrupt("return");case 4:if(-1==e.afterHeight){a.next=13;break}return e.isBlocksDataLoading=!0,a.next=8,e.getBlocksByHeight(e.afterHeight);case 8:for(s=a.sent,e.afterHeight=s.afterHeight,n=0;n<s.blocks.length-1;n++)e.blocks.push(s.blocks[n]);e.blocks.push(s.blocks[s.blocks.length-1]),e.$nextTick((function(){e.isBlocksDataLoading=!1}));case 13:case"end":return a.stop()}}),a)})))()},handleScrolledToTop:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,n,i,c,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=4;break}return a.abrupt("return");case 4:return e.isBlocksDataLoading||(e.isBlocksDataLoading=!0),s=e.blocks[0].height,i=10,e.topHeight-s>=10?n=s+11:(n=e.topHeight+1,i=e.topHeight-s),a.next=10,e.getBlocksByHeight(n);case 10:if(c=a.sent,c.blocks.length>0){for(o=i-1;o>0;o--)e.blocks.unshift(c.blocks[o]);e.blocks.unshift(c.blocks[0]),e.$nextTick((function(){document.getElementById("block-"+s).scrollIntoView(!0),e.isBlocksDataLoading=!1}))}case 12:case"end":return a.stop()}}),a)})))()},handleGotoHeight:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=-1,null==t.gotoHeight||isNaN(a=Number(t.gotoHeight))){e.next=7;break}return t.isBlocksDataLoading=!0,e.next=5,t.getBlocksByHeight(a+1);case 5:s=e.sent,s.blocks.length>0&&-1!=s.afterHeight?(t.afterHeight=s.afterHeight,t.blocks=s.blocks,t.$nextTick((function(){document.getElementById("block-"+a).scrollIntoView(!0),a==t.topHeight&&(t.isBlocksDataLoading=!1),t.showBlockBroadcast(t.blocks[0])}))):t.isBlocksDataLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},updateBlocks:function(t,e){if(e)this.blocks=t;else{var a=!0,s=!1,n=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var o=i.value;this.blocks.push(o)}}catch(r){s=!0,n=r}finally{try{a||null==c.return||c.return()}finally{if(s)throw n}}}this.isBlocksDataLoading=!1},getMap:function(t){var e={},a=!0,s=!1,n=void 0;try{for(var i,c=t.blocks[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var o=i.value;o&&(e[o.height]=o)}}catch(r){s=!0,n=r}finally{try{a||null==c.return||c.return()}finally{if(s)throw n}}return e},showBlock:function(t){var e=this.$refs["block-"+this.selectedHeight];e&&null!=e[0]&&(e[0].selected=!1),this.$refs["block-"+t.height][0].selected=!0,this.selectedHeight=t.height;var a=[];t.bch.isEmpty||(a.push(t.bch),t.bch.tag="BCH"),t.bchn.isEmpty||(a.push(t.bchn),t.bchn.tag="BCH NODE"),t.bchbchn.isEmpty||(a.push(t.bchbchn),t.bchbchn.tag="BCH ABC NODE"),this.bdatas=a},changeTab:function(t){var e=t.currentTarget.getAttribute("tab");e!=this.tab&&(this.gotoHeight=null,this.isBlocksDataLoading=!0,this.blocks=[],this.afterHeight=0,this.tab=e,this.bdatas=[],this.getTopBlocks())}},mounted:function(){R.$on("showBlock",this.showBlock),this.getTopBlocks()}}),L=E,D=(a("5485"),Object(d["a"])(L,n,i,!1,null,"7dcbc566",null)),j=D.exports,M=a("e37d"),N=a("85fe"),$=a("4ae6"),P=a.n($);a("3760");s["a"].use(M["a"]),s["a"].use(N["a"]),s["a"].use(P.a),s["a"].config.productionTip=!1;var R=new s["a"];new s["a"]({render:function(t){return t(j)}}).$mount("#app")},"60e9":function(t,e,a){},c254:function(t,e,a){"use strict";var s=a("eb06"),n=a.n(s);n.a},d17b:function(t,e,a){},eb06:function(t,e,a){},f71d:function(t,e,a){},f94f:function(t,e,a){"use strict";var s=a("f71d"),n=a.n(s);n.a}});
//# sourceMappingURL=app.b01a68e9.js.map